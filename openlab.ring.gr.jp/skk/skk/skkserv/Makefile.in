###########################################################################
#	Makefile for SKK Server Version 3.x
###########################################################################

SHELL = /bin/sh
@SET_MAKE@

srcdir = @srcdir@
top_srcdir = @top_srcdir@
VPATH = @srcdir@

CC = @CC@
CFLAGS = @CFLAGS@
INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
LDFLAGS = @LDFLAGS@
LIBS = @LIBS@

prefix = @prefix@
exec_prefix = @exec_prefix@
libexecdir = $(exec_prefix)/libexec
datadir = $(prefix)/share

# SKK JISYO which skkserv uses
JISYO = SKK-JISYO.L
JISYODIR = $(datadir)/skk
SERVERDIR = @libexecdir@

DEFS = -I$(srcdir) -I$(top_srcdir) $(CFLAGS) @DEFS@ @PRIVATE@ \
	-DDEFAULT_JISYO=\"$(JISYODIR)/$(JISYO)\"

all: skkserv

skkserv: skkserv.o
	$(CC) $(LDFLAGS) -o $@ skkserv.o $(LIBS)

skkserv.o: skkserv.c skkserv.h
	$(CC) $(DEFS) -c skkserv.c

install: skkserv
	$(top_srcdir)/mkinstalldirs $(SERVERDIR)
	$(INSTALL_PROGRAM) skkserv $(SERVERDIR)
#	sh add-services $(NIS)
#	sh add-rc.local $(SERVERDIR)/skkserv

clean:
	rm -f skkserv.o skkserv core

distclean: clean
	rm -f Makefile

TAGS: skkserv.c
	etags skkserv.c

.PHONY: clean
